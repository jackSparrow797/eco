/*!
 * ColorPicker - ColorPicker Template Variable
 * Version: 1.0.4
 * Build date: 2019-08-18
 */

Ext.namespace("Ext.ux"),Ext.ux.ColorPicker=Ext.extend(Ext.BoxComponent,{initComponent:function(){this.applyDefaultsCP(),Ext.ux.ColorPicker.superclass.initComponent.apply(this,arguments),this.addEvents("select")},onRender:function(){Ext.ux.ColorPicker.superclass.onRender.apply(this,arguments),this.body=this.body||this.container||this.renderTo||Ext.DomHelper.append(Ext.getBody(),{},!0),this.el||(this.el=this.body,this.cls&&Ext.get(this.el).addClass(this.cls)),this.renderComponent()},applyDefaultsCP:function(){Ext.apply(this,{cls:"x-cp-mainpanel",resizable:this.resizable||!1,HSV:{h:0,s:0,v:0},updateMode:null})},renderComponent:function(){Ext.DomHelper.append(this.body,{id:this.cpGetId("rgb"),cls:"x-cp-rgbpicker"}),Ext.DomHelper.append(this.body,{id:this.cpGetId("hue"),cls:"x-cp-huepicker"}),this.huePicker=Ext.DomHelper.append(this.body,{cls:"x-cp-hueslider"}),this.hueDD=new Ext.dd.DD(this.huePicker,"huePicker"),this.hueDD.constrainTo(this.cpGetId("hue"),{top:-7,right:-3,bottom:-7,left:-3}),this.hueDD.onDrag=this.moveHuePicker.createDelegate(this),Ext.get(this.cpGetId("hue")).on("mousedown",this.clickHUEPicker.createDelegate(this)),Ext.get(this.huePicker).moveTo(Ext.get(this.cpGetId("hue")).getLeft()-3,Ext.get(this.cpGetId("hue")).getTop()-7),this.rgbPicker=Ext.DomHelper.append(this.body,{cls:"x-cp-rgbslider"}),this.rgbDD=new Ext.dd.DD(this.rgbPicker,"rgbPicker"),this.rgbDD.constrainTo(this.cpGetId("rgb"),-7),this.rgbDD.onDrag=this.moveRGBPicker.createDelegate(this),Ext.get(this.cpGetId("rgb")).on("mousedown",this.clickRGBPicker.createDelegate(this)),Ext.get(this.rgbPicker).moveTo(Ext.get(this.cpGetId("rgb")).getLeft()-7,Ext.get(this.cpGetId("rgb")).getTop()-7),this.formPanel=new Ext.form.FormPanel({renderTo:Ext.DomHelper.append(this.body,{id:this.cpGetId("fCont"),cls:"x-cp-formcontainer"},!0),frame:!0,labelAlign:"left",labelWidth:10,forceLayout:!0,items:[{layout:"column",items:[{columnWidth:.5,layout:"form",defaultType:"numberfield",defaults:{width:42,value:0,minValue:0,maxValue:255,allowBlank:!1,labelSeparator:""},items:[{fieldLabel:"R",id:this.cpGetId("iRed")},{fieldLabel:"G",id:this.cpGetId("iGreen")},{fieldLabel:"B",id:this.cpGetId("iBlue")}]},{columnWidth:.5,layout:"form",defaultType:"numberfield",defaults:{width:42,value:0,minValue:0,maxValue:255,allowBlank:!1,labelSeparator:""},items:[{fieldLabel:"H",maxValue:360,id:this.cpGetId("iHue")},{fieldLabel:"S",id:this.cpGetId("iSat")},{fieldLabel:"V",id:this.cpGetId("iVal")}]}]},{layout:"form",defaultType:"textfield",labelAlign:"left",defaults:{width:127,value:"000000",labelSeparator:"",allowBlank:!1},id:this.cpGetId("cCont"),items:[{fieldLabel:"#",id:this.cpGetId("iHexa"),value:"000000"}]}]}),Ext.getCmp(this.cpGetId("iRed")).on("change",this.updateFromIRGB.createDelegate(this)),Ext.getCmp(this.cpGetId("iGreen")).on("change",this.updateFromIRGB.createDelegate(this)),Ext.getCmp(this.cpGetId("iBlue")).on("change",this.updateFromIRGB.createDelegate(this)),Ext.getCmp(this.cpGetId("iHue")).on("change",this.updateFromIHSV.createDelegate(this)),Ext.getCmp(this.cpGetId("iSat")).on("change",this.updateFromIHSV.createDelegate(this)),Ext.getCmp(this.cpGetId("iVal")).on("change",this.updateFromIHSV.createDelegate(this)),Ext.getCmp(this.cpGetId("iHexa")).on("change",this.updateFromIHexa.createDelegate(this)),Ext.DomHelper.append(this.cpGetId("cCont"),{cls:"x-btn x-btn-small x-cp-colorbox x-cp-websafe",id:this.cpGetId("cWebSafe")},!0).update("Websafe"),Ext.DomHelper.append(this.cpGetId("cCont"),{cls:"x-btn x-btn-small x-cp-colorbox x-cp-inverse",id:this.cpGetId("cInverse")},!0).update("Inverse"),Ext.DomHelper.append(this.cpGetId("cCont"),{cls:"x-btn x-btn-small x-cp-colorbox x-cp-pickcolor",id:this.cpGetId("cColor")},!0).update("Pick Color"),Ext.get(this.cpGetId("cWebSafe")).on("click",this.updateFromBox.createDelegate(this)),Ext.get(this.cpGetId("cInverse")).on("click",this.updateFromBox.createDelegate(this)),Ext.get(this.cpGetId("cColor")).on("click",this.selectColor.createDelegate(this))},cpGetId:function(t){return this.getId()+"__"+(t||"cp")},updateRGBPosition:function(t,e){this.updateMode="click",t=181<(t=t<0?0:t)?181:t,e=181<(e=e<0?0:e)?181:e,this.HSV.s=this.getSaturation(t),this.HSV.v=this.getValue(e),Ext.get(this.rgbPicker).moveTo(Ext.get(this.cpGetId("rgb")).getLeft()+t-7,Ext.get(this.cpGetId("rgb")).getTop()+e-7,this.animateMove||!0),this.updateColor()},updateHUEPosition:function(t){this.updateMode="click",t=181<(t=t<1?1:t)?181:t,this.HSV.h=Math.round(360/181*(181-t)),Ext.get(this.huePicker).moveTo(Ext.get(this.huePicker).getLeft(),Ext.get(this.cpGetId("hue")).getTop()+t-7,this.animateMove||!0),this.updateRGBPicker(this.HSV.h),this.updateColor()},clickRGBPicker:function(t){this.updateRGBPosition(t.xy[0]-Ext.get(this.cpGetId("rgb")).getLeft(),t.xy[1]-Ext.get(this.cpGetId("rgb")).getTop())},clickHUEPicker:function(t){this.updateHUEPosition(t.xy[1]-Ext.get(this.cpGetId("hue")).getTop())},moveRGBPicker:function(){this.rgbDD.constrainTo(this.cpGetId("rgb"),-7),this.updateRGBPosition(Ext.get(this.rgbPicker).getLeft()-Ext.get(this.cpGetId("rgb")).getLeft()+7,Ext.get(this.rgbPicker).getTop()-Ext.get(this.cpGetId("rgb")).getTop()+7)},moveHuePicker:function(){this.hueDD.constrainTo(this.cpGetId("hue"),{top:-7,right:-3,bottom:-7,left:-3}),this.updateHUEPosition(Ext.get(this.huePicker).getTop()-Ext.get(this.cpGetId("hue")).getTop()+7)},updateRGBPicker:function(t){this.updateMode="click",Ext.get(this.cpGetId("rgb")).setStyle({"background-color":"#"+this.rgbToHex(this.hsvToRgb(t,1,1))}),this.updateColor()},updateColor:function(){var t=this.hsvToRgb(this.HSV.h,this.HSV.s,this.HSV.v),e=this.websafe(t),i=this.invert(t),s=this.invert(e);"hexa"!==this.updateMode&&Ext.getCmp(this.cpGetId("iHexa")).setValue(this.rgbToHex(t)),"rgb"!==this.updateMode&&(Ext.getCmp(this.cpGetId("iRed")).setValue(t[0]),Ext.getCmp(this.cpGetId("iGreen")).setValue(t[1]),Ext.getCmp(this.cpGetId("iBlue")).setValue(t[2])),"hsv"!==this.updateMode&&(Ext.getCmp(this.cpGetId("iHue")).setValue(Math.round(this.HSV.h)),Ext.getCmp(this.cpGetId("iSat")).setValue(Math.round(100*this.HSV.s)),Ext.getCmp(this.cpGetId("iVal")).setValue(Math.round(100*this.HSV.v))),Ext.get(this.cpGetId("cColor")).setStyle({background:"#"+this.rgbToHex(t),color:"#"+this.rgbToHex(i)}),Ext.getDom(this.cpGetId("cColor")).title="#"+this.rgbToHex(t),Ext.get(this.cpGetId("cInverse")).setStyle({background:"#"+this.rgbToHex(i),color:"#"+this.rgbToHex(t)}),Ext.getDom(this.cpGetId("cInverse")).title="#"+this.rgbToHex(i),Ext.get(this.cpGetId("cWebSafe")).setStyle({background:"#"+this.rgbToHex(e),color:"#"+this.rgbToHex(s)}),Ext.getDom(this.cpGetId("cWebSafe")).title="#"+this.rgbToHex(e),Ext.get(this.huePicker).moveTo(Ext.get(this.huePicker).getLeft(),Ext.get(this.cpGetId("hue")).getTop()+this.getHPos(Ext.getCmp(this.cpGetId("iHue")).getValue())-7,this.animateMove||!0),Ext.get(this.rgbPicker).moveTo(Ext.get(this.cpGetId("rgb")).getLeft()+this.getSPos(Ext.getCmp(this.cpGetId("iSat")).getValue()/100)-7,Ext.get(this.cpGetId("hue")).getTop()+this.getVPos(Ext.getCmp(this.cpGetId("iVal")).getValue()/100)-7,this.animateMove||!0),Ext.get(this.cpGetId("rgb")).setStyle({"background-color":"#"+this.rgbToHex(this.hsvToRgb(Ext.getCmp(this.cpGetId("iHue")).getValue(),1,1))})},setColor:function(t){/^[0-9a-fA-F]{6}$/.test(t)&&(Ext.getCmp(this.cpGetId("iHexa")).setValue(t),this.updateFromIHexa())},updateFromIRGB:function(){this.updateMode="rgb";var t=this.rgbToHsv(Ext.getCmp(this.cpGetId("iRed")).getValue(),Ext.getCmp(this.cpGetId("iGreen")).getValue(),Ext.getCmp(this.cpGetId("iBlue")).getValue());this.HSV={h:t[0],s:t[1],v:t[2]},this.updateColor()},updateFromIHSV:function(){this.updateMode="hsv",this.HSV={h:Ext.getCmp(this.cpGetId("iHue")).getValue(),s:Ext.getCmp(this.cpGetId("iSat")).getValue()/100,v:Ext.getCmp(this.cpGetId("iVal")).getValue()/100},this.updateColor()},updateFromIHexa:function(){this.updateMode="hexa";var t=this.rgbToHsv(this.hexToRgb(Ext.getCmp(this.cpGetId("iHexa")).getValue()));this.HSV={h:t[0],s:t[1],v:t[2]},this.updateColor()},updateFromBox:function(t,e){this.updateMode="click";var i=this.rgbToHsv(this.hexToRgb(Ext.get(e).getColor("backgroundColor","","")));this.HSV={h:i[0],s:i[1],v:i[2]},this.updateColor()},selectColor:function(t,e){this.fireEvent("select",this,Ext.get(e).getColor("backgroundColor","",""))},hsvToRgb:function(t,e,i){if(t instanceof Array)return this.hsvToRgb.call(this,t[0],t[1],t[2]);var s,o,r,h,n,c,a,l;switch(c=i*(1-e),a=i*(1-(n=t/60-(h=Math.floor(t/60%6)))*e),l=i*(1-(1-n)*e),h){case 0:s=i,o=l,r=c;break;case 1:s=a,o=i,r=c;break;case 2:s=c,o=i,r=l;break;case 3:s=c,o=a,r=i;break;case 4:s=l,o=c,r=i;break;case 5:s=i,o=c,r=a}return[this.realToDec(s),this.realToDec(o),this.realToDec(r)]},rgbToHsv:function(t,e,i){if(t instanceof Array)return this.rgbToHsv.call(this,t[0],t[1],t[2]);var s,o,r,h,n;switch(t/=255,e/=255,i/=255,s=Math.min(Math.min(t,e),i),r=(o=Math.max(Math.max(t,e),i))-s,o){case s:h=0;break;case t:h=60*(e-i)/r,e<i&&(h+=360);break;case e:h=60*(i-t)/r+120;break;case i:h=60*(t-e)/r+240}return n=0===o?0:1-s/o,[Math.round(h),n,o]},realToDec:function(t){return Math.min(255,Math.round(256*t))},rgbToHex:function(t,e,i){return t instanceof Array?this.rgbToHex.call(this,t[0],t[1],t[2]):this.decToHex(t)+this.decToHex(e)+this.decToHex(i)},decToHex:function(t){var e="0123456789ABCDEF";return t=parseInt(t,10),t=isNaN(t)?0:t,e.charAt(((t=255<t||t<0?0:t)-t%16)/16)+e.charAt(t%16)},getHCharPos:function(t){return"0123456789ABCDEF".indexOf(t.toUpperCase())},hexToDec:function(t){var e=t.split("");return 16*this.getHCharPos(e[0])+this.getHCharPos(e[1])},hexToRgb:function(t){return[this.hexToDec(t.substr(0,2)),this.hexToDec(t.substr(2,2)),this.hexToDec(t.substr(4,2))]},getHue:function(t){var e=360-Math.round((181-t)/181*360);return 360==e?0:e},getHPos:function(t){return 181-t*(181/360)},getSaturation:function(t){return t/181},getSPos:function(t){return 181*t},getValue:function(t){return(181-t)/181},getVPos:function(t){return 181-181*t},checkSafeNumber:function(t){var e,i;if(!isNaN(t))for(t=Math.min(Math.max(0,t),255),e=0;e<256;e+=51)if(i=e+51,e<=t&&t<=i)return 25<t-e?i:e;return t},websafe:function(t,e,i){return t instanceof Array?this.websafe.call(this,t[0],t[1],t[2]):[this.checkSafeNumber(t),this.checkSafeNumber(e),this.checkSafeNumber(i)]},invert:function(t,e,i){return t instanceof Array?this.invert.call(this,t[0],t[1],t[2]):[255-t,255-e,255-i]}}),Ext.ux.ColorDialog=Ext.extend(Ext.Window,{initComponent:function(){this.width=!this.width||this.width<353?353:this.width,this.applyDefaultsCP(),Ext.ux.ColorDialog.superclass.initComponent.apply(this,arguments)},onRender:function(){Ext.ux.ColorDialog.superclass.onRender.apply(this,arguments),this.renderComponent()}}),Ext.applyIf(Ext.ux.ColorDialog.prototype,Ext.ux.ColorPicker.prototype),Ext.ux.ColorPanel=Ext.extend(Ext.Panel,{initComponent:function(){this.width=!this.width||this.width<300?300:this.width,this.applyDefaultsCP(),Ext.ux.ColorPanel.superclass.initComponent.apply(this,arguments)},onRender:function(){Ext.ux.ColorPanel.superclass.onRender.apply(this,arguments),this.renderComponent()}}),Ext.applyIf(Ext.ux.ColorPanel.prototype,Ext.ux.ColorPicker.prototype),Ext.reg("colorpicker",Ext.ux.ColorPicker),Ext.reg("colordialog",Ext.ux.ColorDialog),Ext.reg("colorpanel",Ext.ux.ColorPanel),Ext.namespace("Ext.ux","Ext.ux.menu","Ext.ux.form"),"2"===Ext.version.substr(0,1)?(Ext.ux.menu.ColorItem=function(t){t||(t={}),t.style="width:400px;",Ext.ux.menu.ColorItem.superclass.constructor.call(this,new Ext.ux.ColorPicker(t),t),this.picker=this.component,this.addEvents("select"),this.picker.on("render",function(t){t.getEl().swallowEvent("click")}),this.picker.on("select",this.onSelect,this)},Ext.extend(Ext.ux.menu.ColorItem,Ext.menu.Adapter,{onSelect:function(t,e){this.fireEvent("select",this,e,t),Ext.ux.menu.ColorItem.superclass.handleClick.call(this)}}),Ext.ux.menu.ColorMenu=function(t){Ext.ux.menu.ColorMenu.superclass.constructor.call(this,t),this.plain=!0;var e=new Ext.ux.menu.ColorItem(t);this.add(e),this.picker=e.picker,this.relayEvents(e,["select"])},Ext.extend(Ext.ux.menu.ColorMenu,Ext.menu.Menu,{beforeDestroy:function(){this.picker.destroy()}})):Ext.ux.menu.ColorMenu=Ext.extend(Ext.menu.Menu,{enableScrolling:!1,hideOnClick:!0,initComponent:function(){Ext.apply(this,{plain:!0,showSeparator:!1,items:this.picker=new Ext.ux.ColorPicker(Ext.apply({style:"width:400px;"},this.initialConfig))}),this.picker.purgeListeners(),Ext.ux.menu.ColorMenu.superclass.initComponent.call(this),this.relayEvents(this.picker,["select"]),this.on("select",this.menuHide,this),this.handler&&this.on("select",this.handler,this.scope||this)},menuHide:function(){this.hideOnClick&&this.hide(!0)}}),Ext.ux.form.ColorPickerField=Ext.extend(Ext.form.TriggerField,{triggerClass:"x-form-colorpicker-trigger",initComponent:function(){Ext.ux.form.ColorPickerField.superclass.initComponent.call(this),this.menu=new Ext.ux.menu.ColorMenu},setValue:function(t){if(/^[0-9a-fA-F]{6}$/.test(t)){Ext.ux.form.ColorPickerField.superclass.setValue.apply(this,arguments);var e=this.menu.picker.rgbToHex(this.menu.picker.invert(this.menu.picker.hexToRgb(t)));this.el.applyStyles("background: #"+t+"; color: #"+e+";")}},onDestroy:function(){this.menu&&this.menu.destroy(),this.wrap&&this.wrap.remove(),Ext.ux.form.ColorPickerField.superclass.onDestroy.call(this)},onBlur:function(){Ext.ux.form.ColorPickerField.superclass.onBlur.call(this);var t=this.getValue();if(/^[0-9a-fA-F]{6}$/.test(t)){var e=this.menu.picker.rgbToHex(this.menu.picker.invert(this.menu.picker.hexToRgb(t)));this.el.applyStyles("background: #"+t+"; color: #"+e+";")}else this.el.applyStyles("background: #ffffff; color: #000000;")},menuListeners:{select:function(t,e){this.setValue(e),this.fireEvent("select",this,e),this.focus.defer(10,this)},show:function(){this.onFocus()},hide:function(){this.focus.defer(10,this);var t=this.menuListeners;this.menu.un("select",t.select,this),this.menu.un("show",t.show,this),this.menu.un("hide",t.hide,this)}},onTriggerClick:function(){this.disabled||(this.menu.on(Ext.apply({},this.menuListeners,{scope:this})),this.menu.show(this.el,"tl-bl?"),this.menu.picker.setColor(this.getValue()))}}),Ext.reg("colorpickerfield",Ext.ux.form.ColorPickerField);var colorpicker=function(t){t=t||{},colorpicker.superclass.constructor.call(this,t)};Ext.extend(colorpicker,Ext.Component,{page:{},window:{},grid:{},tree:{},panel:{},combo:{},config:{},jquery:{},form:{}}),Ext.reg("colorpicker",colorpicker),ColorPicker=new colorpicker;